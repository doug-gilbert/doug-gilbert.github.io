<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title>The Linux SCSI Generic (sg) Driver</title>
	<meta name="generator" content="LibreOffice 6.4.7.2 (Linux)"/>
	<meta name="created" content="00:00:00"/>
	<meta name="changed" content="2021-04-23T11:33:40.932092629"/>
	<meta name="description" content="Linux SCSI Generic driver home
      page"/>
	<meta name="keywords" content="Linux storage, SCSI, sg driver, pass      through"/>
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<style type="text/css">
		@page { size: 21.59cm 27.94cm; margin-left: 2cm; margin-right: 1cm; margin-top: 1cm; margin-bottom: 1cm }
		p { margin-bottom: 0.25cm; background: transparent; line-height: 115%; background: transparent }
		h2 { margin-top: 0.35cm; margin-bottom: 0.21cm; background: transparent; background: transparent; page-break-after: avoid }
		h2.western { font-family: "Liberation Serif", serif; font-size: 18pt; font-weight: bold }
		h2.cjk { font-family: "Noto Sans CJK SC Regular"; font-size: 18pt; font-weight: bold }
		h2.ctl { font-family: "Lohit Devanagari"; font-size: 18pt; font-weight: bold }
		h1 { margin-bottom: 0.21cm; background: transparent; background: transparent; page-break-after: avoid }
		h1.western { font-family: "Liberation Serif", serif; font-size: 24pt; font-weight: bold }
		h1.cjk { font-family: "Noto Serif CJK SC"; font-size: 24pt; font-weight: bold }
		h1.ctl { font-family: "Lohit Devanagari"; font-size: 24pt; font-weight: bold }
		td p { background: transparent; background: transparent }
		tt.western { font-family: "Liberation Mono", monospace }
		tt.cjk { font-family: "Courier New", monospace }
		tt.ctl { font-family: "Liberation Mono", monospace }
		a:link { color: #000080; so-language: zxx; text-decoration: underline }
	</style>
</head>
<body lang="en-CA" link="#000080" vlink="#800000" background="data:image/jpeg;base64,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" dir="ltr"><h1 class="western" align="center">
The Linux SCSI Generic (sg) Driver</h1>
<ol>
	<li><p style="margin-bottom: 0cm"><a name="mozToc"></a><a href="#mozTocId553227">The
	Linux SCSI Generic (sg) Driver</a> 
	</p>
	<ol>
		<li><p style="margin-bottom: 0cm"><a href="#mozTocId682829">News</a>
				</p>
		<li><p style="margin-bottom: 0cm"><a href="#mozTocId921329">Introduction</a>
				</p>
		<li><p style="margin-bottom: 0cm"><a href="#mozTocId37938">Background</a>
				</p>
		<li><p style="margin-bottom: 0cm"><a href="#mozTocId551081">Features</a>
				</p>
		<li><p style="margin-bottom: 0cm"><a href="#mozTocId689512">SG
		device driver downloads</a> 
		</p>
		<li><p style="margin-bottom: 0cm"><a href="#mozTocId566194">Utilities:
		sg3_utils and sg_utils</a> 
		</p>
		<li><p style="margin-bottom: 0cm"><a href="#mozTocId131298">Sg
		related pages</a> 
		</p>
		<li><p><a href="#mozTocId681782">External references</a> 
		</p>
	</ol>
</ol>
<h2 class="western"><a name="mozTocId682829"></a>News</h2>
<p>[2021-04-21] release of ddpt version 0.97 . See <a href="ddpt.html">ddpt</a>
page.</p>
<p>[2021-04-21] release of sdparm version 1.12 . See <a href="sdparm.html">sdparm</a>
page</p>
<p>[2021-04-16] Updated <a href="scsi_debug.html">scsi_debug</a> page
for lk 5.9 through , 5.12 additions</p>
<p>[2021-04-08] This site (i.e. danny.cz ) now supports <u><b>https</b></u><span style="text-decoration: none"><span style="font-weight: normal">,
please adjust your browsers; caches may need to be cleared</span></span></p>
<p>[2021-04-07] Updated sg version 4 driver. See the <a href="sg_v40.html">sg_v40</a>
page, this driver is in development</p>
<p>[2021-03-29] release of sg3_utils-1.46 . See <a href="sg3_utils.html">sg3_utils</a>
page.</p>
<p>[2021-02-03] <a href="https://github.com/doug-gilbert/lsscsi">lsscsi-0.32</a>
beta, see <a href="../scsi/lsscsi.html">lsscsi</a> page.</p>
<p>[2020-03-19] release of smp_utils version 0.99 . See <a href="smp_utils.html"><font color="#21409a">smp_utils</font></a>
page</p>
<p>[2020-02-20] <a href="lsscsi-0.31.tgz">lsscsi-0.31</a> released,
see <a href="../scsi/lsscsi.html">lsscsi</a> page.</p>
<p><br/>
<br/>

</p>
<p>The author's various SCSI related packages are now mirrored on
<a href="https://github.com/">github.com</a> . The primary
repositories remain in subversion on the author's equipment. The
<a href="sg3_utils.html">sg3_utils</a> and <a href="../scsi/lsscsi.html">lsscsi</a>
packages are mirrored on Hannes Reinecke's site at github :
<a href="https://github.com/hreinecke/sg3_utils">https://github.com/hreinecke/sg3_utils</a>
in the master (default) branch. The author continues to track
progress with a subversion revision number which is a sequential
number currently at 891 for sg3_utils. The github sg3_utils package's
<a href="https://github.com/hreinecke/sg3_utils/blob/master/ChangeLog">ChangeLog</a>
file shows where the mirror is &quot;at&quot; and currently that is
revision 841 dated 20200210, several commits behind the author's
repository. The other sg3_utils git branches may be of interest to
users and relate to Hannes' work at SUSE Labs. Most work in those
other branches will be merged into the master branch in time. Also
found at that location is the <a href="https://github.com/hreinecke/lsscsi">lsscsi</a>
mirror. Both packages may have later versions on this site (as
tarballs in the Downloads section of the links given above). So it
might be worthwhile to check both locations.<br/>
<br/>
The author
also has a github account at <a href="https://github.com/doug-gilbert">https://github.com/doug-gilbert</a>
which has mirrors for the <a href="sdparm.html">sdparm</a>, <a href="ddpt.html">ddpt</a>
and <a href="smp_utils.html">smp_utils</a> packages and alternative
mirrors for <a href="https://github.com/doug-gilbert/sg3_utils">sg3_utils</a>
and <a href="https://github.com/doug-gilbert/lsscsi">lsscsi</a>. The
sdparm and ddpt packages depend on a library from sg3_utils. <br/>
<br/>
So,
for example to build sdparm, clone the github sdparm and
sg3_utils_lib repositories to the build machine; then from
sg3_utils_lib clone, copy the <tt class="western">include/</tt> and
<tt class="western">lib/</tt> directories with those names and
contents over to the sdparm clone, under the main directory. So that
main directory should end up at least containing these
sub-directories: <tt class="western">src/</tt>, <tt class="western">doc/</tt>,
<tt class="western">lib/</tt> and <tt class="western">include/</tt>.
The sdparm package should be then ready to build. IMO, contrary to
much online propaganda, git is not better in all respects than
subversion, especially for non-distributed development. In this case
the author uses subversion's &quot;externals&quot; feature to include
the library sub-tree of sg3_utils in the source trees of sdparm and
ddpt. There is no exact parallel to this feature in git.<br/>
<br/>
Packages
will still have major releases done through this site. For example,
that will be release 1.46 for sg3_utils . The release will have
source tarballs and Debian and Redhat packages for Linux. There will
also be a tarball of Windows executable(s) typically built with
MinGW. Also there is an attempt to publicise the releases on related
newsgroups (e.g. Note that the subversion revision number stops
increasing in the ChangeLog once a release has been made, and a new
paragraph will appear at the top of the ChangeLog when revisions are
committed for the next release.<br/>
<br/>
<br/>

</p>
<h2 class="western"><a name="mozTocId921329"></a>Introduction</h2>
<p>The Linux sg driver is a upper level SCSI subsystem device driver
that is used primarily to handle devices _not_ covered by the other
upper level drivers: sd (disks), st (tapes) and sr (CDROMs and DVDs).
The sg driver is used for enclosure management, cd writers,
applications that read cd audio digitally and scanners. Sg can also
be used for less usual tasks performed on disks, tapes and cdroms. Sg
is a character device driver which, in some contexts, gives it
advantages over block device drivers such as sd and sr. The interface
of sg is at the level of SCSI command requests and their associated
responses.<br/>
<br/>
The term SCSI has several meaning depending on
the context. This leads to confusion. One practical way of defining
it today is everything that the T10 INCITS committee controls, see
<a href="https://www.t10.org/">www.t10.org</a> . Probably the most
succinct overview is this standards architecture <a href="https://t10.org/scsi-3.htm">page</a>
. For practical purposes a &quot;SCSI device&quot; in Linux is any
device that uses the Linux SCSI subsystem and this often includes
SATA disks.<br/>
<br/>
From about Linux kernel 2.6.24, there is an
alternate SCSI pass-through driver called &quot;bsg&quot; (block SCSI
generic driver). The bsg driver has device names of the form
/dev/bsg/0:1:2:3 and supports the SG_IO ioctl with the sg version 3
interface. The bsg driver also supports the sg version 4 interface
which at this time the sg driver does not. Amongst other improvements
the sg version 4 interface supports SCSI bidirectional commands. All
recent &quot;sg&quot; user space packages (i.e. sg3_utils, sdparm,
ddpt and smp_utils) work equally well on both sg and bsg device
names. 
</p>
<h2 class="western"><a name="mozTocId37938"></a>Background</h2>
<p>The original driver was written by Lawrence Foard in 1992 and
remained unchanged for several years. In August 1998 Heiko Eissfeldt
and Joerg Schilling started working on enhancements to this driver.
Soon after, the author became involved and these efforts culminated
in a new sg driver being placed in Linux kernel 2.2.6 which was
released on 16th April 1999. It contains the first major upgrade to
the SCSI generic packet device driver (&quot;sg&quot;) since 1992.
This new driver has a super-set of the original interface and the
semantics of the implementation are very similar. Hence it offers a
high degree of backward compatibility with the original driver. 
</p>
<p>The major reason for introducing a new sg driver into the 2.2
series of kernels was the problem that the original device driver was
having finding memory. This driver improves the situation by using
scatter gather, memory above the 16 MBytes level and memory from the
scsi dma pool as appropriate. Other drivers were affected by these
memory problems (especially those associated with ISA hardware). In
kernel 2.2.10 H.J. Lu introduced a new kernel memory allocator that
alleviated many of these memory problems. 
</p>
<p>On 4th January 2001 the Linux 2.4.0 kernel was introduced and it
contained the &quot;version 3&quot; sg driver that is described
below.</p>
<p>On 17th December 2003 the Linux 2.6.0 kernel was introduced and it
also contained the &quot;version 3&quot; sg driver that is described
below. The SG_IO ioctl was implemented in the block layer and in
several other &quot;char&quot; SCSI drivers (e.g. the st driver for
tapes). Hence many programs can use primary device nodes (e.g.
/dev/hdd for an ATAPI cd/dvd writer) to send SCSI command via the
SG_IO ioctl. The sg driver still permits a clean pass through
interface to all devices that use the Linux SCSI subsystem. 
</p>
<h2 class="western"><a name="mozTocId551081"></a>Features</h2>
<p>The following enhancements have been added (in lk 2.2.6): scatter
gather, command queueing, per file descriptor sequencing (was per
device) and asynchronous notification. Scatter gather allows large
buffers (previously limited to 128 KB on i386) to be used. Scatter
gather is also a lot more &quot;kernel friendly&quot;. The original
driver used a single large buffer which made it impossible to run 2
or more sg-based applications at the same time. With the new driver a
buffer is reserved for each file descriptor guaranteeing that at
least that buffer size will be available for each request on the file
descriptor. A user may request a larger buffer size on any particular
request but runs the (usually remote) risk of an out of memory
(ENOMEM) error. 
</p>
<p>A &quot;version 3&quot; sg driver was introduced in Linux kernel
2.4.0 . It adds a new interface that allows more control over SCSI
commands and returns more information about their performance. This
driver is present in Linux kernel 2.4.0 . A separate version with
reduced capabilities is available for the 2.2 series kernels.
Features include: a simplified SG_IO ioctl, larger sense buffer,
residual DMA count, 16 byte (or longer) commands, direct IO support,
command duration timing and a &quot;proc_fs&quot; interface.
Naturally it is backward compatible with applications based on the sg
interface in the lk 2.2 series and earlier.<br/>
<br/>
In the lk 2.6
series the SG_IO ioctl has been replicated (with a slightly reduced
feature set) in the block subsystem. This allows the SG_IO ioctl to
be used on block devices such as /dev/sda and /dev/scd0. In lk 2.6.6
the SG_IO ioctl became available in the st upper level SCSI subsystem
driver (for tapes). See the <a href="sg_io.html">sg_io</a> page.</p>
<h2 class="western"><a name="mozTocId689512"></a>SG device driver
downloads</h2>
<p>The following table summarizes the different versions of the sg
device driver that are available. If you wish to use one of these
tarballs then untar it in /usr/src/linux (or wherever the top of your
kernel tree is). As a precaution you may wish to copy the files
include/scsi/sg.h and drivers/scsi/sg.c to other names. This will
facilitate reversing the patch if required. For information about the
differences between versions see the history section at the top of
the include/scsi/sg.h file.</p>
<p align="center" style="margin-bottom: 0cm">&nbsp; <b>Table 1. sg
device drivers</b> 
</p>
<table width="100%" cellpadding="2" cellspacing="2">
	<tr>
		<td style="border: 1px double #808080; padding: 0.05cm"><p><b>Sg
			driver&nbsp;</b> <br/>
<b>version+tarball</b></p>
		</td>
		<td style="border: 1px double #808080; padding: 0.05cm"><p><b>Notes</b></p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			sg version&nbsp; <a href="p/sg3019.tgz">3.0.19</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			sg version 3 backported to lk 2.2</p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			sg version&nbsp; <a href="p/sg1501.tgz">1.5.01</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			sg version 1 (original) ported to lk 2.4</p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			&nbsp;</p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			&nbsp;</p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg3117_lk240.tgz">sg3117_lk240</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/scsi-generic_v3.txt">documentation</a> and <a href="s_packet.html">notes</a></p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_lk2422.tgz">sg_lk2422</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			bug fix</p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_lk2423.tgz">sg_lk2423</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			bug fix, found in lk 2.4.23-&gt;26</p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_lk2428.tgz">sg_lk2428</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			version found in lk 2.4.28</p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_lk2429.tgz">sg_lk2429</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			version found in lk 2.4.29,30,31,32</p>
		</td>
	</tr>
	<tr valign="top">
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			&nbsp;</p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			&nbsp;&nbsp;</p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_lk2611.tgz">sg_lk2611</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			&nbsp;driver found in 2.6.11</p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_lk2613.tgz">sg_lk2613</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			&nbsp;driver found in 2.6.13</p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_lk2616.tgz">sg_lk2616</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			driver found in 2.6.16</p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_lk2618.tgz">sg_lk2618</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			driver found in 2.6.18</p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_lk2618scat.tgz">sg_lk2618scat</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			proposed additions including scatter_elem_sz attribute</p>
		</td>
	</tr>
</table>
<p><br/>
For the Linux kernel 2.2 series, the current&nbsp;
production version of the sg driver is 2.1.39 . All sg drivers for
the 2.2 series of kernels (including the original) are
interchangeable (but see final section on this page about Red Hat 6.2
and Mandrake 7.1). So, for example, sg22orig.tgz can be put in lk
2.2.17 while, on the other hand, sg2140.tgz can be put in lk 2.2.0 . 
</p>
<p>For the Linux kernel 2.4 series, the current production version of
sg is 3.1.25 (in lk 2.4.23-&gt;32). 
</p>
<p>For the Linux kernel 2.6 series, the current production version of
sg is 3.5.34 .</p>
<p>Older versions can be obtained from <a href="https://sg.danny.cz/sg/p">this</a>
directory. A sub directory called &quot;original&quot; contains the
original driver (i.e. prior to linux kernel 2.2.6) and its HOWTO
document. 
</p>
<h2 class="western"><a name="mozTocId566194"></a>Utilities: sg3_utils
and sg_utils</h2>
<p>These packages contain multiple utilities, all with command line
interfaces. They send one one more SCSI commands to the nominated
device and output the response including error reports if the command
failed. The name of the SCSI command executed is typically reflected
in the name of the utility; for example: &quot;sg_inq&quot; sends a
SCSI INQUIRY command and decodes its response. These utilities were
originally written for the Linux operating system. In sg3_utils
version 1.19 a subset of the utilities were ported to FreeBSD and
Tru64; in version 1.22 a similar subset of the utilities were ported
to Windows; and in version 1.24 a Solaris port was added.<br/>
<br/>
The
most recent package is called <b>sg3_utils</b> and it uses the sg
&quot;version 3&quot; interface (sometimes known as the SG_IO
interface) in linux. This interface is in&nbsp; lk 2.4.0 and later
kernels, including the lk 2.6, 3 and 4 series. All new features are
being added into <b>sg3_utils</b> <b>(</b>i.e. it is still&nbsp;
being actively developed). Many of the utilities in sg3_utils
(versions &gt;= 1.02) can be used directly on block devices (e.g.
<font face="monospace">sg_inq /dev/sda</font>) in the lk 2.6 series.&nbsp;
The <a href="sg_dd.html">sg_dd</a> utility is at a slightly higher
level issuing SCSI READ and WRITE commands to copy data, mimicking
the Unix dd command. See the <a href="sg3_utils.html">sg3_utils</a>
package <a href="sg3_utils.html">page</a> for more details.</p>
<p>The older (and original) package is called <b>sg_utils</b> and it
uses the sg version 2 interface found linux kernel version 2.2.6 and
onward. Over half of those utilities will also work on the original
sg device driver (at least back to the lk 2.0 series). If required,
&quot;make common&quot; will produce the subset that will work on the
whole lk 2.x series. Since the sg &quot;version 3&quot; device driver
still maintains the original interface, the sg_utils package will
continue to work in the lk 2.4 and lk 2.6 series . This package is
now in maintenance mode, only bugs will be fixed. See this <a href="uu_index.html">page</a>
for more details.</p>
<p style="margin-bottom: 0cm">The latest versions, packaged in
tarballs, source, binary rpms and debian packages are given in the
following table. They contain README and CHANGELOG files and man
pages.&nbsp; The tarball contains a &quot;spec&quot; file for
building rpms and a debian directory containing build information.&nbsp;
Here is the most recently released sg3_utils <a href="p/sg3_utils.ChangeLog">CHANGELOG</a>
.</p>
<p align="center" style="margin-bottom: 0cm">&nbsp; <br/>
<b>Table 2.
sg3_utils/sg_utils tarballs and packages</b></p>
<table width="100%" cellpadding="2" cellspacing="2">
	<tr>
		<td style="border: 1px double #808080; padding: 0.05cm"><p><br/>

			</p>
		</td>
		<td valign="top" style="border: 1px double #808080; padding: 0.05cm"><p>
			&nbsp; <b>tarballs</b>&nbsp;</p>
		</td>
		<td style="border: 1px double #808080; padding: 0.05cm"><p><b>rpm
			source rpms</b></p>
		</td>
		<td style="border: 1px double #808080; padding: 0.05cm"><p><b>i386
			rpm binaries</b></p>
		</td>
		<td valign="top" style="border: 1px double #808080; padding: 0.05cm"><p>
			&nbsp;&nbsp; <b>debian packages</b></p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<b>sg3_utils<br/>
</b>check News<br/>
section above<br/>
for betas</p>
		</td>
		<td valign="top" style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg3_utils-1.46.tgz">sg3_utils-1.46.tgz</a><br/>
<a href="p/sg3_utils-1.46.tar.xz">sg3_utils-1.46.tar.xz</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<br/>

			</p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<br/>

			</p>
		</td>
		<td valign="top" style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg3-utils_1.46-0.1_amd64.deb">sg3-utils_1.46-0.1_amd64.deb</a><br/>
<a href="p/libsgutils2-2_1.46-0.1_amd64.deb">libsgutils2-2_1.46-0.1_amd64.deb</a></p>
		</td>
	</tr>
	<tr>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<b>sg_utils</b></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_utils-1.02.tgz">sg_utils-1.02.tgz</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_utils-1.02-1.src.rpm">sg_utils-1.02-1.src.rpm</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<a href="p/sg_utils-1.02-1.i386.rpm">sg_utils-1.02-1.i386.rpm</a></p>
		</td>
		<td style="border-top: none; border-bottom: 1px double #808080; border-left: 1px double #808080; border-right: 1px double #808080; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0.05cm; padding-right: 0.05cm"><p>
			<br/>

			</p>
		</td>
	</tr>
</table>
<p><br/>
See the <a href="sg3_utils.html">sg3_utils</a> page for more
packages (e.g. 64 bit versions of Debian, Redhat and Windows binary
packages) plus older versions. 
</p>
<h2 class="western"><a name="mozTocId131298"></a>Sg related pages</h2>
<p>Following are some links to related pages on this site: 
</p>
<ul>
	<li><p style="margin-bottom: 0cm">Full sg version 3 documentation
	for lk 2.4 series is now available. It is in DocBook format (html
	rendering): <a href="p/sg_v3_ho.html">sg_v3_ho.html</a> (ps, pdf and
	text renderings also in same directory). This document is also
	available as LDP's <a href="https://www.tldp.org/HOWTO/SCSI-Generic-HOWTO">SCSI-Generic-HOWTO</a>&nbsp;
	Here is documentation specific to the&nbsp; <a href="sg_io.html">sg_io</a>&nbsp;
	ioctl, especially in the lk 2.6 series.</p>
	<li><p style="margin-bottom: 0cm">Older Sg version 3 <a href="p/scsi-generic_v3.txt">documentation</a>&nbsp;&nbsp;
	for lk 2.4 series (now superseded by the DocBook version above) 
	</p>
	<li><p style="margin-bottom: 0cm"><a href="../scsi/lsscsi.html">lsscsi</a>
	command for the lk 2.6 series. Lists SCSI devices or SCSI hosts.</p>
	<li><p style="margin-bottom: 0cm"><a href="sdparm.html">sdparm</a>
	utility to view and change mode pages, view VPD pages and send
	commands (for lk 2.6 and 2.4 series) 
	</p>
	<li><p style="margin-bottom: 0cm"><a href="ddpt.html">ddpt</a>
	utility which is dd-like which is able to access SCSI devices at the
	SCSI command level</p>
	<li><p style="margin-bottom: 0cm"><a href="sg3_utils.html">sg3_utils</a>
	package of utilities that send SCSI commands 
	</p>
	<li><p style="margin-bottom: 0cm"><a href="smp_utils.html">smp_utils</a>
	package of utilities for Serial Attached SCSI (SAS) SMP functions</p>
	<li><p style="margin-bottom: 0cm">the <a href="tools.html">tools</a>
	page contains information about many scsi/storage packages from
	various sources 
	</p>
	<li><p style="margin-bottom: 0cm">Some <a href="s_packet.html">notes</a>
	about the &quot;version 3&quot; sg driver found in the lk 2.4 series
	(including mmap notes). 
	</p>
	<li><p style="margin-bottom: 0cm"><a href="sdebug26.html">scsi_debug</a>
	LLD (adapter) driver for simulating lots of disks and doing tests in
	the lk 2.6 and lk 3 series.&nbsp; Here is the <a href="sdebug.html">scsi_debug</a>&nbsp;
	driver for the lk 2.4 series. 
	</p>
	<li><p style="margin-bottom: 0cm"><a href="scsi_ses.html">scsi_ses</a>
	LLD (adapter) driver for simulating an enclosure services (SES)
	device. 
	</p>
	<li><p style="margin-bottom: 0cm"><a href="rbuf_tbl.html">Timings</a>
	for direct and indirect IO (as used by sg); these are old and should
	be updated</p>
	<li><p style="margin-bottom: 0cm">Some <a href="fst_copy.html">fast</a>
	copy options for disks (including raw devices) 
	</p>
	<li><p style="margin-bottom: 0cm"><a href="../scsi/devfs_scsi.html">devfs</a>
	and SCSI in lk 2.3.46 and the lk 2.4 series. Devfs has been replaced
	by systemd and <a href="https://www.freedesktop.org/wiki/Software/systemd/">udev</a></p>
	<li><p style="margin-bottom: 0cm">description of the Linux <a href="../scsi/SCSI-2.4-HOWTO/index.html">SCSI
	subsystem</a> in the lk 2.4 series. There is a single page html
	rendering: SCSI-2.4-HOWTO.html plus ps, pdf and text renderings in
	the same directory. This document has become the LDP's
	<a href="https://www.tldp.org/HOWTO/SCSI-2.4-HOWTO/">SCSI-2.4-HOWTO</a>
	. The version on this site may be more recent. 
	</p>
	<li><p style="margin-bottom: 0cm">linux 2.6 series SCSI mid to lower
	level API document can be found in the
	Documentation/scsi/scsi_mid_low_api.txt file in the kernel source
	tree. 
	</p>
	<li><p style="margin-bottom: 0cm">smartmontools for SCSI <a href="../scsi/smartmontools_scsi.html">article</a>
	.</p>
	<li><p style="margin-bottom: 0cm"><a href="p/scsi-generic.txt">Abridged</a>
	and longer <a href="p/scsi-generic_long.txt">documentation</a>&nbsp;
	for sg driver in lk 2.2 series (describes sg version 2.1.39) 
	</p>
	<li><p>A <a href="faq.html">FAQ</a> including current project
	status, bug fixes and other useful patches 
	</p>
</ul>
<h2 class="western"><a name="mozTocId681782"></a>External references</h2>
<p>Here are some useful links to related information held at other
sites: 
</p>
<ul>
	<li><p style="margin-bottom: 0cm"><a href="https://www.t10.org/">www.t10.org</a>&nbsp;&nbsp;
	is a very important site for SCSI related information. It contains
	SCSI 2 and 3 draft standards. 
	</p>
	<li><p style="margin-bottom: 0cm">every wonder what all those
	acronyms mean and how they relate, see this <a href="https://www.t10.org/scsi-3.htm">diagram</a>
	at t10.org .</p>
	<li><p style="margin-bottom: 0cm"><a href="https://www.scsita.org/">www.scsita.org</a>
	is the SCSI Trade Association. There is an interesting tutorial on
	Serial Attached SCSI (SAS) there.</p>
	<li><p style="margin-bottom: 0cm"><a href="http://www.andante.org/scsi.html">www.andante.org/scsi.html&nbsp;</a>
	is Eric Youngdale's site. Eric is primarily responsible for the
	Linux SCSI architecture and its mid-level implementation in the 2.2
	and 2.4 series of kernels 
	</p>
	<li><p style="margin-bottom: 0cm">Kurt Garloff has several <a href="https://www.garloff.de/kurt/linux/">pages</a>&nbsp;&nbsp;
	with Linux SCSI themes (including the scsidev, scsiinfo and
	rescan-scsi-bus programs). 
	</p>
	<li><p style="margin-bottom: 0cm">The Scsi Command Utility (<b>scu</b>)
	is quite comprehensive and is ported to several OSes including
	Linux. Its home page can be found <a href="https://www.scsifaq.org/RMiller_Tools/index.html">here</a>
	. 
	</p>
	<li><p style="margin-bottom: 0cm">The newsgroup
	linux-scsi@vger.kernel.org is the appropriate place to discuss Linux
	SCSI related issues. 
	</p>
	<li><p>The MAINTAINERS source file in the top level of the linux
	kernel source tree contains up to date information about who
	maintains what and where information can be found. Links to SCSI
	adapter information are also in that file. SCSI documentation within
	the kernel source has been moved to the Documentation/scsi directory
	in the lk 2.6 series. 
	</p>
</ul>
<p align="center" style="margin-bottom: 0cm"><a href="mailto:dgilbert%20at%20%20interlog%20dot%20com">Douglas
Gilbert</a> can be emailed at that address. <br/>
Last updated: 23rd
April 2021, 11:30 [UTC-4]</p>
<p style="margin-bottom: 0cm"><br/>

</p>
</body>
</html>